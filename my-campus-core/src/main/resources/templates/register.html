<!DOCTYPE html>
<html>

<head th:replace="fragments/commonHead :: head" pageTitle="Register"></head>

<body>
    <nav th:replace="fragments/navbar :: navbar"></nav>
    <div class="container p-3"></div>
    <div class="container mt-5 mb-3">
        <div class="d-flex justify-content-between align-items-center">
            <h2 data-testid="register-title">Register new user</h2>
            <a href="/user" class="btn btn-secondary" data-testid="register-back">Back</a>
        </div>
        <div th:if="${infoMessage}" th:class="${infoMessage.status == 'success' ? 'alert alert-success' : 'alert alert-danger'}" role="alert" data-testid="register-info-message">
            <p th:text="${infoMessage.message}"></p>
        </div>
        <form th:action="@{/user/register}" method="post" role="form" class="mt-4" data-testid="register-form">
            <div class="mb-3">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstName" name="firstName"
                    placeholder="Enter your first name" required data-testid="register-first-name">
            </div>
            <div class="mb-3">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Enter your last name"
                    required data-testid="register-last-name">
            </div>
            <div class="mb-3">
                <label for="birthdate" class="form-label">Birthdate</label>
                <input type="date" class="form-control" id="birthdate" name="birthDate" required data-testid="register-birthdate">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email"
                    required data-testid="register-email">
            </div>
            <div class="mb-3">
                <label for="country" class="form-label">Country</label>
                <input type="text" class="form-control" id="country" name="address.country"
                    placeholder="Enter your country" required data-testid="register-country">

                <label for="city" class="form-label mt-3">City</label>
                <input type="text" class="form-control" id="city" name="address.city" placeholder="Enter your city"
                    required data-testid="register-city">

                <label for="zip" class="form-label mt-3">ZIP Code</label>
                <input type="text" class="form-control" id="zip" name="address.zip" placeholder="Enter your ZIP code"
                    required data-testid="register-zip">

                <label for="street" class="form-label mt-3">Street</label>
                <input type="text" class="form-control" id="street" name="address.street"
                    placeholder="Enter your street" required data-testid="register-street">

                <label for="houseNumber" class="form-label mt-3">House Number</label>
                <input type="text" class="form-control" id="houseNumber" name="address.houseNumber"
                    placeholder="Enter your house number" required data-testid="register-house-number">
            </div>
            <div class="mb-3">
                <label for="role" class="form-label">Role</label>
                <select class="form-control" id="role" name="role" required data-testid="register-role">
                    <option value="ROLE_ADMIN">ROLE_ADMIN</option>
                    <option value="ROLE_STUDENT">ROLE_STUDENT</option>
                    <option value="ROLE_PROFESOR">ROLE_PROFESOR</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary w-100" data-testid="register-submit">Register</button>
        </form>
    </div>
    </div>
    <div th:if="${response}" data-testid="register-response">
        <div th:if="${response.status == 'success'}" data-testid="register-success">
            <div th:replace="fragments/toasts/successToast :: successToast" th:with="response=${response}"></div>
        </div>
        <div th:if="${response.status == 'error'}" data-testid="register-error">
            <div th:replace="fragments/toasts/errorToast :: errorToast" th:with="response=${response}"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
        <script th:replace="fragments/javaScript :: javaScript"></script>
</body>

</html>